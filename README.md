# mySysYc
北航6系编译课个人仓库

## 第一次实验作业

本课程的实验，是根据给定的文法实现一个小型编译器。该编译器的实现分成几个阶段来完成，请根据每次作业的提示，逐步增加该编译器的模块，最终形成一个生成特定目标代码的完整编译器。

开始编写编译器代码之前，需要仔细阅读和分析给定的文法、设计编译器的总体结构和各模块之间的接口、考虑编译的每个阶段可能出现的错误类型。为此，第一项作业从文法的解读开始。

请仔细阅读下面的文法，要求对文法中每条规则所定义的语法成分进行分析，了解其作用、限定条件、组合情况和可能产生出的句子，在此基础上，编写4-6个测试程序，要求所有测试程序能共同覆盖所有语法规则及每条规则内的常见组合情况，每个测试程序有且仅有10条写语句（每个测试程序的第一条写语句请用printf '('＜字符串＞ ')'输出自己的学号，其他写语句需尽量反映出程序定义的数据及其运算结果，以便在后续阶段测试各种语法成分翻译的正确性）。请提供每个测试程序的输入数据(有<读语句>则提供，否则只需提供空的输入文件)、输出数据（输出数据必须提供。若输入输出数据没有正确提供，评测时会报错），放到文件中，按下述要求为文件命名：

测试程序及对应的输入输出数据文件分别为  

         testfile1.txt   input1.txt   output1.txt

         testfile2.txt   input2.txt   output2.txt

                                          ...

         testfilen.txt    inputn.txt   outputn.txt

     将以上文件打包为rar或zip文件后上传（请直接打包文件，不用置于文件夹中打包）。

     需独立完成，发现雷同按作弊处理

     注：本学期实验的所有作业都针对此文法，后续作业需在上一次作业的基础上进行增量式开发


    2022年编译器课程设计文法详见“课件下载”中的文档《2022编译技术实验文法定义及相关说明》

    有如下约定：

    1. 常量数组不能作为参数传递；

    2. 相邻的 UnaryOp 不能相同，如 i = --+4; 是不符合语义约束的；

    3. UnaryOp 为 '!' 时只能出现在条件表达式中；

    4. ConstExp -> AddExp 这条规则所涉及的 Ident 必须为常量；

    5. printf 语句中的转义字符有且仅有 '\n'，即为了与 gcc 评测结果保持一致， '\' 不能单独出现（将视为不符合文法），只可以与 'n' 结对出现。

    6. 为了简化后续同学们开发编译器的难度，有返回值的函数的最后一个 <stmt> 一定是 return 语句（注意是 <FuncDef> 中 <Block> 的最后一个语句）

    7. 对于整数数字的要求：不含前导0，但数字 0 是合法的。

    8. main 函数的返回值只能为 0。

*请注意：*

  1. 评测程序对各测试程序进行编译运行，检查输入输出是否与给定的文件一致；计算每个测试程序的覆盖率和所有测试程序的累积覆盖率，得分率=累积覆盖的项数/检查的总项数。若得分率小于90%，不给出提示，请仔细阅读文法补充或完善测试程序；得分率大于等于90%，则可以得到关于未覆盖规则或组合的提示。

  2. 测试程序难度分为三个等级：A、B、C，难度依次递减。其中 B 级难度需要包含文法中黄色高亮内容，A 级难度需要包含绿色高亮内容，其中绿色高亮部分，即程序中的条件判断需要【短路求值】规则。上传文件时，请保证有且仅有一个 A 级难度 testfile ，编号为 1；有且仅有两个 B 级难度 testfile，编号为 2 和 3；其余为 C 级难度。即 testfile 编号越小，难度越高。

  3. 评测机输出说明

    a. 每一个 testfile的 status 会有三种情况

      RIGHT：完全正确（有的时候爆栈也会显示 RIGHT ，但是覆盖率是 0 ，这种情况请联系助教排查）

      WRONG：如果覆盖率为 0，则表示程序不符合文法及语义约束，同时 detail 中会提示某个 testfile 有问题；如果有覆盖率，则表示程序的输入输出不匹配

      Runtime error：gcc 没有跑通你的测试程序

    b. Total 的 status 只有 WRONG 和 RIGHT，RIGHT 的出现当且仅当所有 testfile 的 status 都是 RIGHT

    c. Score 是得分，若有一个 testfile 的 status 不为 RIGHT，则得分为0；若都为 RIGHT，则得分为总覆盖率

  4. 将文件保存成 utf-8（无 bom）或者 ANSI 的格式，否则可能会影响评测结果。

  5. 即使没有输入，也要给一个空的输入文件。

  6. 有的同学可能会出现输入输出不匹配的错误，输出文件的行尾缺少本应该输出的空格。这种情况请用电脑自带的文本编辑器来保存文件并上传，有的 IDE 如 jetbrain 那一套，保存后会自动抹去行尾空格，造成输出不一致的问题。

  7. 同学们可在本地使用 gcc 8.5.0 以上的版本进行调测，此时需要替换输入的 getint() 函数为scanf（详见文档第一节）。

  8. 如果对测试结果有异议的话，请联系各班助教，课程组将进行错误排查。
